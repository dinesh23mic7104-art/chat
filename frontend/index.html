<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8'>
  <title>Smart AI Chatbot 🤖</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;max-width:700px;margin:40px auto;background:#f4f4f4;padding:20px;border-radius:10px;}
    #chat{border:1px solid #ccc;padding:10px;height:350px;overflow:auto;background:white;border-radius:6px;}
    .you{color:blue;margin:4px 0;}
    .bot{color:green;margin:4px 0;}
    input{width:70%;padding:10px;border-radius:4px;border:1px solid #ccc;}
    button{padding:10px 20px;background:#0078D7;color:white;border:none;border-radius:4px;cursor:pointer;}
    button:hover{background:#005fa3;}
  </style>
</head>
<body>
  <h2>Smart AI Chatbot 🤖</h2>
  <div id='chat'></div><br>
  <input id='msg' placeholder='Type your message here...'>
  <button id='send'>Send</button>

  <script>
    const BACKEND_URL = "http://127.0.0.1:5000/chat"; // Flask backend endpoint

    async function sendMessage(){
      const msg = document.getElementById('msg').value.trim();
      if(!msg) return;

      append('<p class="you"><b>You:</b> '+escapeHtml(msg)+'</p>');
      document.getElementById('msg').value='';
      try{
        const res = await fetch(BACKEND_URL,{
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({message:msg})
        });
        const data = await res.json();
        append('<p class="bot"><b>Bot:</b> '+escapeHtml(data.reply)+'</p>');
      }catch(e){
        append('<p style="color:red"><b>Error:</b> '+escapeHtml(e.toString())+'</p>');
      }
    }

    function append(html){
      const c=document.getElementById('chat');
      c.innerHTML+=html; 
      c.scrollTop=c.scrollHeight;
    }

    function escapeHtml(s){
      return s.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;');
    }

    document.getElementById('send').addEventListener('click',sendMessage);
    document.getElementById('msg').addEventListener('keydown',e=>{
      if(e.key==='Enter')sendMessage();
    });
  </script>
</body>
</html>
